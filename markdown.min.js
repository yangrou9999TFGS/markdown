/**
 * Name             markdown
 * Description      Markdown to HTML.
 * Author           Yangrou
 * License          MIT
 */
 /**
 * Updata
 * 增加有序列表
 * 增加![]()对视频、音频的支持
 */
function addMdStyle(e){document.head.innerHTML+=`<style>${e}</style>`}function toHTML(e){"use strict";let l=e.split("\n");for(;/^ *$/.test(l[l.length-1]);)l.splice(l.length-1,1);let t=0,s=-1;for(;t<l.length;){if(l[t]=new String(l[t]),l[t]=l[t].replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll("'","&apos;").replaceAll('"',"&quot;").replaceAll("**",'"').replaceAll("~~","'"),/^```scratch-blocks$/.test(l[t])){let e=t+1;for(;"```"!=l[e]&&e!=l.length;)e++;l[t]="",l.splice(e,1);for(let s=t+1;s<e;s++)l[t]+=l[t+1]+"\n",l.splice(t+1,1);/^\{.*\}$/.test(l[t+1])?(l[t]=`<pre style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' class="code2 blocks">${l[t]}</pre>`,l.splice(t+1,1)):l[t]=`<pre class="code2 blocks">${l[t]}</pre>`,t++;continue}if(/^\\```scratch-blocks$/.test(l[t])&&(l[t]="```scrtach-blocks"),/^```$/.test(l[t])){let e=t+1;for(;"```"!=l[e]&&e!=l.length;)e++;l[t]="",l.splice(e,1);for(let s=t+1;s<e;s++)l[t]+=l[t+1]+"\n",l.splice(t+1,1);/^\{.*\}$/.test(l[t+1])?(l[t]=`<pre style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' class="code2">${l[t]}</pre>`,l.splice(t+1,1)):l[t]=`<pre class="code2">${l[t]}</pre>`,t++;continue}/^\\```$/.test(l[t])&&(l[t]="```");let e=new Array;for(let s=0;s<l[t].slice("").length;e[s]=l[t].slice("")[s++]);let r=1,c=1,i=1,o=1;for(let s in e)"*"==e[s]&&("\\"!=e[s-1]?(e[s]=r?"<i>":"</i>",r=!r):e[s-1]=""),'"'==e[s]&&("\\"!=e[s-1]?(e[s]=c?"<b>":"</b>",c=!c):(e[s-1]="",e[s]="**")),"`"==e[s]&&(/^\{.*\}$/.test(l[t+1])?("\\"!=e[s-1]?(e[s]=i?`<span class="code" style='${l[t+1].slice(1,-1).replaceAll("'",'"')}'>`:"</span>",i=!i):e[s-1]="",l.splice(t+1,1)):"\\"!=e[s-1]?(e[s]=i?'<span class="code">':"</span>",i=!i):e[s-1]=""),"'"==e[s]&&("\\"!=e[s-1]?(e[s]=o?"<strike>":"</strike>",o=!o):(e[s-1]="",e[s]="~~"));if(l[t]=e.join(""),/^# /.test(l[t])&&(l[t]=`<h1>${l[t].slice(2)}</h1>`),/^## /.test(l[t])&&(l[t]=`<h2>${l[t].slice(3)}</h2>`),/^### /.test(l[t])&&(l[t]=`<h3>${l[t].slice(4)}</h3>`),/^#### /.test(l[t])&&(l[t]=`<h4>${l[t].slice(5)}</h4>`),/^##### /.test(l[t])&&(l[t]=`<h5>${l[t].slice(6)}</h5>`),/^###### /.test(l[t])&&(l[t]=`<h6>${l[t].slice(7)}</h6>`),/  $/.test(l[t])&&/^ *$/.test(l[t+1])&&(l[t]=l[t].slice(0,-2)+"<br>"),/^ *$/.test(l[t+1]))for(l[t]+="<br><br>";/^ *$/.test(l[t+2]);)l.splice(t+2,1);let a=0;for(;/!\[.*\]\(.*\)/.test(l[t])&&!/\\!\[.*\]\(.*\)/.test(l[t]);){let e="",s="",r="";for(;"["!=l[t].charAt(a)&&a!=l[t].length;)a++;let c=a++-1;for(;("]"!=l[t].charAt(a)||"("!=l[t].charAt(a+1))&&a!=l[t].length;)s+=l[t].charAt(a),a++;for(a+=2;")"!=l[t].charAt(a)&&a!=l[t].length;)e+=l[t].charAt(a),a++;let i=a;if(a==l[t].length)break;/ &quot;.*&quot;/.test(e)&&(r=e.slice(e.indexOf(" ")+7,-6),e=e.slice(0,e.indexOf(" ")));let o=[".mp4",".webm",".ogg",".mp4/",".webm/",".ogg/"],p=[".mp3",".wav",".ogg","mpeg",".mp3/",".wav/",".ogg/","mpeg/"],d=e.match(/(\.[^\.]*)?$/)[0];console.log(d),-1!=p.indexOf(d)?/^\{.*\}$/.test(l[t+1])?(l[t]=l[t].slice(0,c)+`<audio width='100' height='100' style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' controls><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="audio/mpeg"><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="audio/wav"><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="audio/mp3"><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="audio/ogg"><embed style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' width='100' height='50' src="${e}"></audio>`+l[t].slice(i+1),l.splice(t+1,1)):l[t]=l[t].slice(0,c)+`<audio width='100' height='100' controls><source src="${e}" type="audio/mpeg"><source src="${e}" type="audio/wav"><source src="${e}" type="audio/mp3"><source src="${e}" type="audio/ogg"><embed src="${e}" width='100' height='50'></audio>`+l[t].slice(i+1):-1!=o.indexOf(d)?/^\{.*\}$/.test(l[t+1])?(l[t]=`<video width='320' height='240' controls style='${l[t+1].slice(1,-1).replaceAll("'",'"')}'><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="video/mp4"><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="video/ogg"><source style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' src="${e}" type="video/webm"><object width='320' height='240' style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' data="${e}"></object></video>`,l.splice(t+1,1)):l[t]=`<video width='320' height='240' controls><source src="${e}" type="video/mp4"><source src="${e}" type="video/ogg"><source src="${e}" type="video/webm"><object width='320' height='240' data="${e}"></object></video>`:/^\{.*\}$/.test(l[t+1])?(l[t]=l[t].slice(0,c)+`<img style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' title='${r}' alt='${s}' src='${e}'>`+l[t].slice(i+1),l.splice(t+1,1)):l[t]=l[t].slice(0,c)+`<img title='${r}' alt='${s}' src='${e}'>`+l[t].slice(i+1)}for(;/\[.*\]\(.*\)/.test(l[t])&&!/\\\[.*\]\(.*\)/.test(l[t]);){let e="",s="",r="";for(;"["!=l[t].charAt(a)&&a!=l[t].length;)a++;let c=a++;for(;("]"!=l[t].charAt(a)||"("!=l[t].charAt(a+1))&&a!=l[t].length;)s+=l[t].charAt(a),a++;for(a+=2;")"!=l[t].charAt(a)&&a!=l[t].length;)e+=l[t].charAt(a),a++;let i=a;if(a==l[t].length)break;/ &quot;.*&quot;/.test(e)&&(r=e.slice(e.indexOf(" ")+7,-6),e=e.slice(0,e.indexOf(" "))),/^\{.*\}$/.test(l[t+1])?(l[t]=l[t].slice(0,c)+`<a target="_blank" style='${l[t+1].slice(1,-1).replaceAll("'",'"')}' title='${r}' href='${e}'>${s}</a>`+l[t].slice(i+1),l.splice(t+1,1)):l[t]=l[t].slice(0,c)+`<a target="_blank" title='${r}' href='${e}'>${s}</a>`+l[t].slice(i+1)}if(/^-{3,}$/.test(l[t])?/^\{.*\}$/.test(l[t+1])?(l[t]=`<hr style='${l[t+1].slice(1,-1).replaceAll("'",'"')}'>`,l.splice(t+1,1)):l[t]="<hr>":/^\\-{3,}$/.test(l[t])&&(l[t]=l[t].replace("\\","")),/^\|(.*\|)*/.test(l[t]))for(;;){let e=1;for(let s=t+1;/^\|(.*\|){1,}/.test(l[s]);s++,e++);let s=new Array(e);if(s.length<2)break;for(let e=t;/^\|(.*\|){1,}/.test(l[e]);e++){s[e-t]=l[e].split("|").slice(1,-1);for(let l=s[e-t].length-2;l>=0;l--)"\\"==s[e-t][l].charAt(s[e-t][l].length-1)&&(s[e-t][l]=s[e-t][l].slice(0,-1)+"|"+s[e-t][l+1],s[e-t].splice(l+1,1))}for(let e=0;e<s[1].length;e++)/:-*:/.test(s[1][e])?s[1][e]="center":/-*:/.test(s[1][e])?s[1][e]="right":s[1][e]="left";let r=s[1];s.splice(1,1);let c="";for(let e=0;e<s.length;e++){if(e+1!=s.length)if(/(\{.*\}){1,}/.test(s[e+1].join(""))){let l=s[e+1];for(let e=0;e<l.length;l[e]=l[e++].replaceAll("'",'"'));if(s.splice(e+1,1),/\{\{.*\}\}/.test(l[0])){c+=`<tr style='${l[0].slice(2,-2)}'>`;for(let t=0;t<s[0].length;t++)c+=`<td align='${r[t]}' style='${l.length>1?l[t+1>=l.length?l.length-1:t+1].slice(1,-1):t+1>=l.length?l.length-1:l[t+1].slice(1,-1)}'>${s[e][t]}</td>`}else{c+="<tr>";for(let t=0;t<s[0].length;t++)c+=`<td align='${r[t]}' style='${l[t>=l.length?l.length-1:t].slice(1,-1)}'>${s[e][t]}</td>`}}else{c+="<tr>";for(let l=0;l<s[0].length;l++)c+=`<td align='${r[l]}'>${s[e][l]}</td>`}else{c+="<tr>";for(let l=0;l<s[0].length;l++)c+=`<td align='${r[l]}'>${s[e][l]}</td>`}c+="</tr>"}/^\{.*\}$/.test(l[t+e])?(c=`<table style='${l[t+e].slice(1,-1).replaceAll("'",'"')}'>${c}</table>`,l.splice(t+e,t)):c=`<table>${c}</table>`,l[t]=c,l.splice(t+1,e-1);break}if(/^- /.test(l[t])){let e=0,s=new Array;for(;/^- /.test(l[e+t])&&e+t!=l.length;)s[s.length]=l[e+t].slice(2),e++;for(let e=0;e<s.length;e++)/^\{.*\}$/.test(s[e+1])?(s[e]=`<li style='${s[e+1].slice(1,-1).replaceAll("'","'")}'>${s[e]}</li>`,s.splice(e+1,1)):s[e]=`<li>${s[e]}</li>`;l[t]=`<ul>${s.join("")}</ul>`,l.splice(t+1,e-1)}if(/^[0-9]{1,}\. /.test(l[t])){let e=l[t].match(/^[0-9]{1,}/),s=0,r=new Array;for(;/^[0-9]{1,}\. /.test(l[s+t])&&s+t!=l.length;)r[r.length]=l[s+t].replace(/^[0-9]{1,}\. /,""),s++;for(let e=0;e<r.length;e++)/^\{.*\}$/.test(r[e+1])?(r[e]=`<li style='${r[e+1].slice(1,-1).replaceAll("'","'")}'>${r[e]}</li>`,r.splice(e+1,1)):r[e]=`<li>${r[e]}</li>`;l[t]=`<ol start='${e}'>${r.join("")}</ol>`,l.splice(t+1,s-1)}let p=["微笑","撇嘴","色","发呆","得意","流泪","害羞","闭嘴","睡","大哭","尴尬","发怒","调皮","呲牙","惊讶","难过","酷","冷汗","抓狂","吐","偷笑","愉快","白眼","傲慢","饥饿","困","惊恐","流汗","憨笑","悠闲","奋斗","咒骂","疑问","嘘","晕","疯了","衰","骷髅","敲打","再见","擦汗","抠鼻","鼓掌","糗大了","坏笑","左哼哼","右哼哼","哈欠","鄙视","委屈","快哭了","阴险","亲亲","吓","可怜","菜刀","西瓜","啤酒","篮球","乒乓","咖啡","饭","猪头","玫瑰","凋谢","嘴唇","爱心","心碎","蛋糕","闪电","炸弹","刀","足球","瓢虫","便便","月亮","太阳","礼物","拥抱","强","弱","握手","胜利","抱拳","勾引","拳头","差劲","爱你","NO","OK","爱情","飞吻","跳跳","发抖","怄火","转圈","磕头","回头","跳绳","投降","激动","乱舞","献吻","左太极","右太极","嘿哈","捂脸","滑稽","机智","皱眉","耶","吃瓜","猫","二哈","doge"];for(let e=0;e<p.length;e++)l[t]=l[t].replaceAll("/"+p[e],`<span class="qq_face qqface${e}"></span>`);let d={"[0]":"font-size:19px;text-decoration:none;color:#2EC9FF;border:1px solid #2EC9FF;background:white;padding:7px;border-radius:7px;:hover{background:#2EC9FF;color:white;cursor:pointer;}"};/^\{.*\}$/.test(l[t+1])&&(l[t+1]=l[t+1].replaceAll("'",'"'),l[t]=`<span style='${l[t+1].slice(1,-1)}'>${l[t]}</span>`,l.splice(t+1,1));for(let e in d)l[t]=l[t].replaceAll(e,d[e]);if(/style='.*:hover{.*}.*'/.test(l[t]))for(;/style='.*:hover{.*}.*'/.test(l[++s]);){let e="__"+s;l[0]=`<style>.${e}${l[t].match(/style='.*:hover{.*}.*'/)[0].match(/:hover{.*}/)[0]}</style>`+l[0],l[t]=l[t].replace(/style='.*:hover{.*}.*'/,`class='${e}'`+l[t].match(/style='.*:hover{.*}.*'/)[0]),l[t]=l[t].replace(/style='.*:hover{.*}.*'/,l[t].match(/style='.*:hover{.*}.*'/)[0].replace(/:hover{.*}/,"")),l[0]=`<style>.${e}{${l[t].match(/style='.*'/)[0].match(/'.*'/)[0].slice(1,-1)}}</style>`+l[0],l[t]=l[t].replace(/style='.*'/,"")}l[t]=l[t].replaceAll("\\\\","\\"),l[t]=l[t].replaceAll("\\|","|"),l[t]=l[t].replaceAll("\\[","["),l[t]=l[t].replaceAll("\\!","!"),l[t]=l[t].replaceAll("\\-","-"),l[t]=l[t].replaceAll("\\{","{"),l[t]=l[t].replaceAll("\\.","."),t++}return l.join("")}$("style")[0].outerHTML="",$("style")[0].outerHTML="",addMdStyle(".code{padding:2px,4px;font-size:90%;color:#c7254e;background:#f9f2f4;border-radius:4px;}img{width:200px;}.code2{display: block; padding: 9.5px; margin: 0 0 10px; font-size: 13px; line-height: 1.42857143; color: #333; word-break: break-all; word-wrap: break-word; background-color: #f5f5f5; border: 1px solid #ccc; border-radius: 4px;}"),addMdStyle("table { width: 200px; margin-bottom: 20px; border: 1px solid #d9d9d9; border-collapse: collapse; border-left: none; word-break: normal; }"),addMdStyle("table td,table th {padding: 8px;border: 1px solid #d9d9d9;line-height: 20px;vertical-align: middle;}"),addMdStyle("table tr:nth-of-type(2n) {background-color: hsla(0,0%,71%,.1);}"),addMdStyle("blockquote {padding: 10px 20px;margin: 0 2em;font-size: 17.5px;border-left: 5px solid #eee;}"),addMdStyle("ul,ol{margin:0px;}"),String.prototype.count=function(e){let l=0;for(let t=0;t<=this.length-e.length;t++){let s=1;for(let l=0;l<e.length;l++)e.charAt(l)!=this.charAt(t+l)&&(s=0);s&&l++}return l};let markdown={toHTML:toHTML,addMdStyle:addMdStyle};